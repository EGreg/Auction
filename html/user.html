<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Interface</title>
    
    <script type="text/javascript" src="https://intercoin.app/Q/plugins/Q/js/jquery-3.7.1.min.js"></script>
    
    <script src="https://unpkg.com/moralis@2.27.2/dist/moralis.js"></script>
    <script src="js/env.js"></script>
    
    <script>
        async function initializeMoralis() {
          try {
            await Moralis.start({
              apiKey: window.env.MORALIS_APIKEY, // Replace with your actual API key
            });
            window.Moralis = Moralis;
            console.log('Moralis initialized!');
          } catch (error) {
            console.error('Failed to initialize Moralis:', error);
          }
        }

         // Initialize Moralis on page load
    initializeMoralis();
    </script>
    
    <script type="module" src="js/user.js" ></script>
    
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/form.css">
    <link rel="stylesheet" type="text/css" href="css/user.css">
    <link rel="stylesheet" type="text/css" href="css/modal.css">

</head>
<body>
    <a id="approveToFactory" class="approveToFactory" href="javascript:void(0)">approve</a>
    
    <div class="main-wrapper">
        <div class="content-wrapper">
            <!-- Gallery Section -->
            <div class="gallery">
                <img src="#" alt="Image 1">
                <img src="#" alt="Image 2">
                <img src="#" alt="Image 3">
                <img src="#" alt="Image 4">
                <img src="#" alt="Image 5">
            </div>

            <!-- Auction Details Section -->
            <div class="auction-details">
                <div class="timer" id="countdownTimer">00:10:00</div>
                <button class="btn bid-button" id="openPopup">Bid</button>
            </div>

            <!-- Bidders Section -->
            <ul class="bidders">
                <!--
                <li>
                    <span>1. 0x12abc...215</span>
                    <span>$12.00</span>
                </li>
                -->
                <li>
                    <span>Loading ...</span>
                </li>
            </ul>

            Share this address for NFT owners to send their NFTs to:<br>
            <div class="auctionCopyAddressContainer" onclick="navigator.clipboard.writeText(new URLSearchParams(window.location.search).get('address')).then(() => alert('Copied!'));">
            ...
            </div>
        </div>

        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>

        <!-- Popup Modal -->
        <div class="popup" id="bidPopup">
            <span class="close-popup" id="closePopup">&times;</span>
            <div class="popup-header">Bid</div>

            <form id="bidForm" class="bid-form" action="javascript:void(0)">
                <div class="form-row">
                    <label for="chainid" class="form-label">Chain:</label>
                    <select
                        name="chainid"
                        id="chainid"
                        class="form-input"
                    >
                        <option value="0x1">Ethereum</option>
                        <option value="0x89">Polygon</option>
                        <option value="0x38">BinanceMainNet</option>
                        <option value="0x2105">Base</option>
                        <option value="0xa">Optimistic</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="bidAmount" class="form-label">Amount:</label>
                    <input type="number" id="bidAmount" class="form-input" placeholder="Enter your bid">
                </div>
                <div class="form-button">
                    <button type="submit" class="btn">Place Your Bid</button>
                </div>
            </form>

        </div>

    </div>

    <script>
        

        function togglePopup(popup, show) {
            
            const overlay = document.getElementById("overlay");
            const displayValue = show ? "block" : "none";

            popup.style.display = displayValue;
            overlay.style.display = displayValue;
        }

        const bidPopup = document.getElementById("bidPopup");
        document.getElementById("openPopup").addEventListener("click", () => togglePopup(bidPopup, true));
        document.getElementById("closePopup").addEventListener("click", () => togglePopup(bidPopup, false));
        document.getElementById("overlay").addEventListener("click", () => togglePopup(bidPopup, false));

        
        //document.getElementById("approveToFactory").addEventListener("click", () => togglePopup(approvePopup, true));
        
    </script>
</body>
</html>